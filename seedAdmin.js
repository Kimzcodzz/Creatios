import bcrypt from 'bcrypt'; import { getDb } from '../src/db.js';
async function seed(){ const db=await getDb(); const users=db.collection('users'); const username=process.env.ADMIN_USER||'admin'; const password=process.env.ADMIN_PASS||'supersecret'; const existing=await users.findOne({username}); if(existing){console.log('Admin already exists:', username); process.exit(0);} const hash=await bcrypt.hash(password,10); await users.insertOne({username, password:hash, role:'admin', createdAt:new Date()}); console.log('âœ… Admin user created:', username); process.exit(0);} seed().catch(e=>{console.error(e); process.exit(1);});